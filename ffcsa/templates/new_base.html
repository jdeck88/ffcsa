<!doctype html>
<html lang="{{ LANGUAGE_CODE }}"{% if LANGUAGE_BIDI %} dir="rtl"{% endif %}>
    {% load pages_tags mezzanine_tags i18n staticfiles static %}
    {% load render_bundle from webpack_loader %}

    <head>
        <meta http-equiv="Content-type" content="text/html; charset=utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="keywords" content="{% block meta_keywords %}{% endblock %}">
        <meta name="description" content="{% block meta_description %}{% endblock %}">
        
        <title>{% block meta_title %}{% endblock %}{% if settings.SITE_TITLE %}{{ settings.SITE_TITLE }}{% endif %}</title>
        
        {# Generated by https://realfavicongenerator.net/ #}
        <link rel="apple-touch-icon" sizes="180x180" href="{% static "/img/favicon/apple-touch-icon.png" %}">
        <link rel="icon" type="image/png" sizes="32x32" href="{% static "/img/favicon/favicon-32x32.png" %}">
        <link rel="icon" type="image/png" sizes="16x16" href="{% static "/img/favicon/favicon-16x16.png" %}">
        <link rel="manifest" href="{% static "/img/favicon/site.webmanifest" %}">
        <link rel="mask-icon" href="{% static "/img/favicon/safari-pinned-tab.svg" %}" color="#000000">
        <link rel="shortcut icon" href="{% static "/img/favicon/favicon.ico" %}">
        <meta name="msapplication-TileColor" content="#da532c">
        <meta name="msapplication-config" content="{% static "/img/favicon/browserconfig.xml" %}">
        <meta name="theme-color" content="#ffffff">
        {# End favicon config #}

        {% include 'ffcsa_core/includes/rollbar.html' %}

        {% ifinstalled mezzanine.blog %}
            <link rel="alternate" type="application/rss+xml" title="RSS" href="{% url "blog_post_feed" "rss" %}">
            <link rel="alternate" type="application/atom+xml" title="Atom" href="{% url "blog_post_feed" "atom" %}">
        {% endifinstalled %}

        {% compress css %}
            {% block extra_css %}{% endblock %}
        {% endcompress %}

        {% render_bundle "manifest" "css" %}
        {% render_bundle "style" "css" %}

        {% compress js %}
            <script src="{% static "mezzanine/js/"|add:settings.JQUERY_FILENAME %}"></script>
            {% block extra_js %}{% endblock %}
        {% endcompress %}
       
        <!-- Facebook Pixel Code -->
        <script>
          !function(f,b,e,v,n,t,s)
          {if(f.fbq)return;n=f.fbq=function(){n.callMethod?
            n.callMethod.apply(n,arguments):n.queue.push(arguments)};
            if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
            n.queue=[];t=b.createElement(e);t.async=!0;
            t.src=v;s=b.getElementsByTagName(e)[0];
            s.parentNode.insertBefore(t,s)}(window, document,'script',
            'https://connect.facebook.net/en_US/fbevents.js');
          fbq('init', '205901347148225');
          fbq('track', 'PageView');
        </script>
        
        <noscript><img height="1" width="1" style="display:none"
                       src="https://www.facebook.com/tr?id=205901347148225&ev=PageView&noscript=1"
        /></noscript>
        <!-- End Facebook Pixel Code -->

        <!--[if lt IE 9]>
        <script src="{% static "js/html5shiv.js" %}"></script>
        <script src="{% static "js/respond.min.js" %}"></script>
        <![endif]-->

        {% block extra_head %}{% endblock %}
        
        <script>
            /* Accessibility. Emulate click event in place of enter for focusable divs. This allows 'onclick' to handle enter presses. */
            document.addEventListener('keyup', (event) => {
                if (event.keyCode === 13 && event.target.tagName.toLowerCase() === 'div') {
                    event.preventDefault();
                    event.target.click();
                    event.target.classList.remove('outline-none')

                // Make sure outline is shown on tab
                } else if (event.keyCode === 9) {
                    event.target.classList.remove('outline-none')

                } else {
                    return false;
                }
            });

            function header_dropdown_toggle(btn) {
                let menu = document.querySelector('#header-dropdown-menu');
                document.querySelector('#header-hamburger-stack').classList.toggle('opened');
                menu.classList.toggle('hidden');
                btn.setAttribute('aria-expanded', !menu.classList.contains('hidden'));
                btn.classList.add('outline-none');
            }
        </script>
            
    </head>

    <body id="{% block body_id %}body{% endblock %}">
        <div id="wrapper">
            <header>
                <nav class="flex justify-between mx-4 my-5 lg:mx-10 lg:my-6">
                    <a href="/" id="header-home-icon" class="inline-block w-3/5 lg:w-2/5" role="button" tabindex="1" aria-label="Home">
                        <img class="h-13" src="/static/img/dff-logo-long.png" draggable="false" aria-hidden="true">
                    </a>

                    <!-- Desktop menu -->
                    <ul class="items-center hidden lg:flex">
                        <li><a href="#sign-in" class="text-brown-7 font-bold text-2xl" style="margin-right: 30px">MEMBER SIGN IN</a></li>
                        <li><a href="#sign-up" class="btn text-lg" style="padding: 10px 18px">BECOME A MEMBER</a></li>
                    </ul>

                    <!-- Mobile menu -->
                    <div id="header-mobile-menu" class="flex no-select-background lg:hidden" role="button" tabindex="2" onclick="header_dropdown_toggle(this)"
                         aria-haspopup="true" aria-expanded="false" aria-label="Expand and collapse main navigation menu">

                        <svg id="header-hamburger-stack" class="self-center" viewBox="0 0 100 50" width="40" height="50" aria-hidden="true">
                            <rect width="90" height="9"></rect>
                            <rect y="25" width="90" height="9"></rect>
                            <rect y="50" width="90" height="9"></rect>
                        </svg>

                        <ul id="header-dropdown-menu" class="hidden">
                            <li><a href="#sign-in" class="text-brown-7 font-bold text-xl">MEMBER SIGN IN</a></li>
                            <li><a href="#sign-up" class="text-brown-7 font-bold text-xl">BECOME A MEMBER</a></li>
                        </ul>
                    </div>
                </nav>
            </header>

            {% block all_content %}
                {% nevercache %}
                    {% if messages %}
                        <div class="messages">
                            {% for message in messages %}
                                <div class="alert alert-dismissable alert-{{ message.tags }}" data-alert="alert">
                                    <button type="button" class="close" data-dismiss="alert"
                                            aria-hidden="true">&times;
                                    </button>
                                    {{ message }}
                                </div>
                            {% endfor %}
                        </div>
                    {% endif %}
                {% endnevercache %}
                
                {% block topbar %}{% endblock %}
                
                <section id="main-section">
                    {% block main_wrapper %}
                        <div class="">
                            {% block main %}{% endblock %}
                        </div>
                    {% endblock %}
                </section>
            {% endblock %}
        
            <footer>
                <div class="container">
                    {% page_menu "pages/menus/footer.html" %}
                </div>
            </footer>

        </div>
        
        {% compress js %}
            <script>
              var static_url = "{% get_static_prefix %}"
              var media_url = "{% get_media_prefix %}"
            </script>
        {% endcompress %}

        {% render_bundle "manifest" "js" %}
        {% render_bundle "style" "js" %}

        {% block js %}{% endblock %}

    </body>
</html>
